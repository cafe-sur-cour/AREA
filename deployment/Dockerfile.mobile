# Flutter Mobile Build Dockerfile
FROM cirrusci/flutter:stable AS builder

WORKDIR /app

COPY mobile/ ./

RUN flutter clean

RUN flutter pub get

RUN flutter build apk --release

# Create the final stage with just the APK
FROM alpine:latest AS runner

RUN mkdir -p /app/build

COPY --from=builder /app/build/app/outputs/flutter-apk/app-release.apk /app/build/area.apk

WORKDIR /app
